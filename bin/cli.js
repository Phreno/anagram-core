#!/usr/bin/env node
// Generated by CoffeeScript 1.10.0
(function() {
  var displayAnagrammes, program, source;

  require('../index.js');

  program = require('commander');

  program.option('-t, --text <text>', 'texte source').option('-l, --list', 'cache les détaille').option('-f, --filter <filter>', 'filtre a appliquer lors de la recherche de résultat').option('-d, --detail', 'détail les résultats').parse(process.argv);

  displayAnagrammes = function(candidate) {
    var output, substraction;
    output = "";
    if (!program.list) {
      output += program.text + " ; " + (program.text.anagramSanitization().sortByFrequency()) + " ; ";
    }
    output += "" + candidate;
    if (!program.list) {
      substraction = source.substractWord(candidate).rawConcatenation().sortByFrequency();
      output += " ; " + substraction;
      if (program.filter) {
        output += " ; " + program.filter;
      }
    }
    return console.log(output);
  };

  if (program.text == null) {
    console.error('Un texte de travail est obligatoire (-t)');
    process.exit(1);
  }

  source = (program.filter ? program.text.substractWord(program.filter).rawConcatenation() : program.text);

  source.elligiblesForAnagram().sort(function(a, b) {
    return a.length - b.length;
  }).forEach(displayAnagrammes);

}).call(this);
